AI診断ロジック仕様書本ドキュメントは、「あなたにおすすめのAIサービス診断アプリ」における診断アルゴリズム、データ構造、および質問の遷移ロジックを解説するものです。1. 診断アルゴリズムの概要本アプリは、ユーザーの回答に応じて各サービスのスコアを増減させる「加点・減点方式（スコアリング）」を採用しています。Yes/Noチャート（決定木）のように途中で選択肢が消えるのではなく、全てのサービスが最後まで候補として残り、最終的な合計点の高さで順位付けされます。スコアリングの基本ルール加点 (+): ユーザーのニーズ（Yes回答）に合致する特徴を持つサービスに点数を加算。減点 (-): ニーズに合わないサービス、または特定の制約（例：日本語必須、スマホ必須）を満たさないサービスから点数を減算。排他制御 (Exclusive): 特定のメディア（動画、音楽など）を選択した場合、それ以外のカテゴリに属するサービスに大きなペナルティを与え、実質的にランキング外へ追いやる。2. データ構造の最適化より正確な診断を実現するため、AIサービスのデータ構造（JSON）を以下の通り最適化しました。主な変更点配列タグの導入 (media_types, purposes):従来の単一値から配列に変更。1つのサービスが「テキストと画像の両方」に対応していることや、「ビジネスと開発の両方」に使えることを正確に表現可能にしました。機能フラグの正規化 (features):「Web検索」「スライド生成」「PDF分析」などの具体的機能を true/false で定義。質問と直結させやすくしました。プラットフォーム要件の分離 (platform):「Discord必須」や「スマホアプリの有無」を独立したオブジェクトで管理。オプトアウト判定の簡素化 (optout.optout_available):学習利用を拒否できるかどうかの総合判定フラグを追加。3. 質問一覧とロジック詳細 (全18問)各質問に対する回答（Yes/No）が、どのようにスコアへ影響するかを記述します。【フェーズ1：大分類・目的の特定】Q1. 画像や動画、音楽など、「形のあるもの（マルチメディア作品）」を作りたい？Yes: media_types に image, video, audio を含むサービスに加点 (+5)。テキスト特化型には小減点。No: テキスト、コード、データ分析系に加点 (+3)。マルチメディア系には大減点 (-10)。Q2. 仕事の効率化、ビジネス文書、プログラミングに使いたい？Yes: purposes に business, dev を含むものに加点 (+5)。チャットカテゴリにも加点。No: purposes に creative を含むものに加点 (+5)。【フェーズ2：メディア種別の排他絞り込み】※ここで特定のメディアを選択すると、他メディアのAIは大きくスコアを落とします。Q3. 「動画」の生成や編集がメイン？Yes: media_types に video を含むものに 特大加点 (+20)。それ以外（テキスト、画像、音声など）に減点。Q4. 「静止画（イラスト・写真・ロゴ）」の生成がメイン？Yes: media_types に image を含むものに 特大加点 (+20)。Q5. 「音楽・音声・読み上げ」の生成がメイン？Yes: media_types に audio を含むものに 特大加点 (+20)。【フェーズ3：専門領域・機能】Q6. プログラミングコードを書く補助がしたい？Yes: media_types に code を含む、または purposes に dev を含むものに 特大加点 (+20)。Q7. 日本語のメニューやサポートが充実していないと不安？Yes: japanese_level: native に加点 (+10)。poor（英語必須）のものに 大減点 (-20)。Q8. 仕事で使うため、学習に使われない設定（オプトアウト）は必須？Yes: optout.optout_available: true に加点 (+15)。false のものに 致命的な減点 (-999) を行い、推奨リストから排除します。Q9. 多少難しくても、細かい設定ができる「プロ向け」ツールがいい？Yes: difficulty: advanced / intermediate に加点。No: difficulty: beginner に加点し、難しいツールを減点。【フェーズ4：具体的な機能・ユースケース】ここからは features や platform オブジェクトを活用して加点します。Q10. 「最新のニュース」やWeb上の情報を検索して教えてほしい？Yes: features.web_search: true のサービスに加点 (+15)。Q11. プレゼン資料（スライド）を自動で作ってほしい？Yes: features.slides_generation: true のサービスに 特大加点 (+25)。Q12. 長い文章や論文、契約書などのPDFを読み込ませて分析したい？Yes: features.pdf_qa: true または features.long_context: true のサービスに加点 (+15)。Q13. スマホアプリで、出先でも手軽に使いたい？Yes: platform.ios_app: true または platform.android_app: true のサービスに加点 (+5)。Q14. 会議の議事録や文字起こしがメインの目的？Yes: features.meeting_transcription: true のサービスに 特大加点 (+25)。Q15. とにかく「無料」の範囲で粘りたい？Yes: pricing: free (+15), freemium (+8)。有料専用 (paid) は減点 (-30)。Q16. AIと「おしゃべり」して暇つぶしや悩み相談をしたい？Yes: purposes: entertainment に加点 (+20)。ビジネス用途は減点。Q17. 「Discord」というチャットアプリを使うことに抵抗はない？Yes: platform.requires_discord: true のサービス（Midjourney等）に加点。No: Discord必須のサービスに 大減点 (-50)。Q18. 学術論文を根拠にした、嘘のない回答が欲しい？Yes: purposes: research (+15) かつ features.citations: true (+10) のサービスに加点。4. 判定ロジックの実装（Technical Note）ソースコード上では、質問定義の weights キーを以下のようにパースして判定しています。media_types:video: tags.media_types 配列に "video" が含まれるか (includes)purposes:dev: tags.purposes 配列に "dev" が含まれるか (includes)features:web_search: features.web_search が true かplatform:requires_discord:true: platform.requires_discord が true かoptout:available: optout.optout_available が true かid:gemini: サービスIDが一致するかこれにより、柔軟かつ詳細な条件分岐を実現しています。